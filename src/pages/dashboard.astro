---
import AppLayout from "@/layouts/AppLayout.astro";
import DashboardPage from "@/components/pages/Dashboard.astro";
import { getUser } from "@/lib/getUser";

const accessToken = Astro.cookies.get("sb-access-token")
const refreshToken = Astro.cookies.get("sb-refresh-token")

if (accessToken?.value && refreshToken?.value) {
  await getUser(accessToken?.value, refreshToken?.value);
}
---

<AppLayout title="Dashboard - Musician's Corner">
  <section class="w-full">
    <DashboardPage />
  </section>
</AppLayout>
