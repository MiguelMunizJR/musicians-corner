---
import Notification from "./Notification.astro";
import SearchInput from "./SearchInput.astro";
import ScoresForm from "./scores/ScoresForm";
import { AvatarCard } from "./AvatarCard.jsx";
import { getUser } from "@/lib/getUser";

const accessToken = Astro.cookies.get("sb-access-token");
const refreshToken = Astro.cookies.get("sb-refresh-token");

const data = await getUser(accessToken?.value, refreshToken?.value);
---

<header class="w-full mt-8 flex items-center">
  <div class="w-full flex items-center">
    <SearchInput className="w-[725px]" />
    <ScoresForm client:load />
  </div>
  <article class="w-full flex justify-end items-center gap-3">
    <div>
      <Notification className="w-7 h-7 relative" />
    </div>
    <AvatarCard user={data} client:visible />
  </article>
</header>
